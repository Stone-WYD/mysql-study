{"objectClass":"NSDictionary","root":{"objectClass":"MindNode","ID":"36T78","children":{"0":{"objectClass":"MindNode","ID":"1UXIU","children":{"0":{"objectClass":"MindNode","ID":"Y1U16","text":"表空间是一个抽象概念，他对应着\n文件系统的一个文件，管理着页","remark":"表空间是逻辑概念","remarkDisplay":true},"1":{"objectClass":"MindNode","ID":"E82X5","children":{"0":{"objectClass":"MindNode","ID":"7M441","text":"叶子节点和叶内节点各占用一个段"},"1":{"objectClass":"MindNode","ID":"6P158","text":"一个区分配一个段，一个段可能包含多个区"},"2":{"objectClass":"MindNode","ID":"VTKF8","children":{"0":{"objectClass":"MindNode","ID":"7Q2DV","text":"零散页面地址"},"1":{"objectClass":"MindNode","ID":"4RLKM","text":"FREE、NOT_FULL、FULL链表基节点"},"2":{"objectClass":"MindNode","ID":"IT75L","text":"192字节"},"objectClass":"NSArray"},"text":"INODE Entry","remark":"段对应的数据结构","remarkDisplay":true},"objectClass":"NSArray"},"text":"段"},"objectClass":"NSArray"},"text":"逻辑概念"},"1":{"objectClass":"MindNode","ID":"IH27M","children":{"0":{"objectClass":"MindNode","ID":"2MR1M","children":{"0":{"objectClass":"MindNode","ID":"DJ7D9","children":{"0":{"objectClass":"MindNode","ID":"VINR2","children":{"0":{"objectClass":"MindNode","ID":"2XS9K","children":{"0":{"objectClass":"MindNode","ID":"4T5TV","text":"List Base Node for FREE List 、List Base Node for FREE FRAG List、List Base Node for FULL FRAG List","remark":"空间表的三个链表的基节点位置","remarkDisplay":true},"1":{"objectClass":"MindNode","ID":"178G9","text":"FREE Limit"},"2":{"objectClass":"MindNode","ID":"B7MGH","text":"Next Unused Segment lD","remark":"当前表空间最大的段ID的下一个ID，创建段使用","remarkDisplay":true},"3":{"objectClass":"MindNode","ID":"U16JD","children":{"0":{"objectClass":"MindNode","ID":"5S94P","text":"SEG_INODES_FULL"},"1":{"objectClass":"MindNode","ID":"J64XJ","text":"SEG_INODES_FREE"},"objectClass":"NSArray"},"text":"INODE链","remark":"存放INODE ENTRY的链（当索引太多时，会形成链）","remarkDisplay":true},"objectClass":"NSArray"},"text":"File Space Header"},"1":{"objectClass":"MindNode","ID":"KJ8Q8","text":"XDES ENTRY","remark":"存放组内所有区的XDES Entry结构","remarkDisplay":true},"objectClass":"NSArray"},"text":"FSP_HDR","remark":"一个表空间只有一个，记录整个表的\n整体属性，所有区的属性","remarkDisplay":true},"1":{"objectClass":"MindNode","ID":"851T4","children":{"0":{"objectClass":"MindNode","ID":"UQI17","text":"先把改操作暂存到内存中，当数据从磁盘加载到内存时再进行修改"},"objectClass":"NSArray"},"text":"IBUF_BITMAP","remark":"存储一些Change Buffer的信息","remarkDisplay":true},"2":{"objectClass":"MindNode","ID":"22D9W","children":{"0":{"objectClass":"MindNode","ID":"J3HD3","text":"存储INODE Entry的页面类型"},"1":{"objectClass":"MindNode","ID":"OQ631","children":{"0":{"objectClass":"MindNode","ID":"3S6QM","text":"SEG_INODES_FREE链为空时会从\n表空间的FREE_FRAG中获取"},"1":{"objectClass":"MindNode","ID":"58EAP","text":"SEG_INODES_FREE链的节点页存放满\n时放入SEG_INODES_FULL"},"objectClass":"NSArray"},"text":"List Node for INODE Page List","remark":"存储上一个 INODE 页面和下一个 INODE 页面","remarkDisplay":true},"objectClass":"NSArray"},"text":"INODE","remarkDisplay":true},"objectClass":"NSArray"},"text":"第一个组最开始\n三个页面是固定的"},"1":{"objectClass":"MindNode","ID":"36QQ8","children":{"0":{"objectClass":"MindNode","ID":"G4887","children":{"0":{"objectClass":"MindNode","ID":"KDZR8","text":"记录组内的XDES ENTRY"},"1":{"objectClass":"MindNode","ID":"6214D","text":"与FSP_HDR相比没有File Space Header"},"objectClass":"NSArray"},"text":"XDES","remark":"登记组内所有区的属性","remarkDisplay":true},"1":{"objectClass":"MindNode","ID":"53JCY","text":"IBUF_BITMAP"},"objectClass":"NSArray"},"text":"其他组的前两个页面是固定的"},"objectClass":"NSArray"},"text":"组","remark":"连续的256个区组成一个组，物理概念","remarkDisplay":true},"1":{"objectClass":"MindNode","ID":"64K86","children":{"0":{"objectClass":"MindNode","ID":"D4FWP","text":"为了让页尽可能连续地放在一起，\n设置了区的概念","remark":"尽可能消除随机I/O","maxWidthLine":251,"remarkDisplay":true},"1":{"objectClass":"MindNode","ID":"RLCE2","children":{"0":{"objectClass":"MindNode","ID":"X3587","text":"FREE","remark":"空闲区","remarkDisplay":true},"1":{"objectClass":"MindNode","ID":"X78NE","text":"FREE_FRAG","remark":"有空闲页面的碎片区","remarkDisplay":true},"2":{"objectClass":"MindNode","ID":"5D91T","text":"FULL_FRAG","remark":"无空闲页面的碎片区","remarkDisplay":true},"3":{"objectClass":"MindNode","ID":"614BV","text":"FSEG","remark":"隶属于某个段","remarkDisplay":true},"objectClass":"NSArray"},"text":"区的分类"},"2":{"objectClass":"MindNode","ID":"TNC7J","children":{"0":{"objectClass":"MindNode","ID":"JMH8T","text":"Segment ID（段id）","remark":"前提是该区已经分配给了某个段","remarkDisplay":true},"1":{"objectClass":"MindNode","ID":"612JQ","text":"State（区状态）"},"2":{"objectClass":"MindNode","ID":"3Y25H","text":"Page State Bimap（页空闲判断使用）"},"objectClass":"NSArray"},"text":"XDES Entry","remark":"区对应的数据结构","remarkDisplay":true},"objectClass":"NSArray"},"text":"区（1M）","remark":"对于16KB的页来说，连续的64个页就是一个区，物理概念","remarkDisplay":true},"2":{"objectClass":"MindNode","ID":"366M2","children":{"0":{"objectClass":"MindNode","ID":"PN414","children":{"0":{"objectClass":"MindNode","ID":"50QG3","children":{"0":{"objectClass":"MindNode","ID":"GB77I","text":"查找表空间中的FREE_FRAG区"},"1":{"objectClass":"MindNode","ID":"MVYD2","text":"上一步没找到，则找FREE的区，然\n后把FREE区变为FREE_FRAG区"},"2":{"objectClass":"MindNode","ID":"12523","text":"FREE_FRAG中的页被填满时变为\nFULL_FRAG区"},"3":{"objectClass":"MindNode","ID":"I80U7","text":"区的状态变更时，会更改对应的属性"},"objectClass":"NSArray"},"text":"段中数据较少时","remark":"该目录涉及的各状态都会维护一个链表","remarkDisplay":true},"1":{"objectClass":"MindNode","ID":"0V365","children":{"0":{"objectClass":"MindNode","ID":"4CLC6","text":"申请完整的区来插入数据"},"objectClass":"NSArray"},"text":"段中数据较多时","remark":"一个段已经占满了32个零散的页","remarkDisplay":true},"objectClass":"NSArray"},"text":"表空间链表的变化"},"1":{"objectClass":"MindNode","ID":"R66VT","text":"段空间链表变化","remark":"类似表空间链表的变化","remarkDisplay":true},"2":{"objectClass":"MindNode","ID":"2345K","text":"List Base Node","remark":"一个链表与一个List Base Node对应，存放链表节点数，第一个节点位置，最后一个节点位置","remarkDisplay":true},"objectClass":"NSArray"},"text":"XDES Entry 链表（List Node）","remark":"XDES Entry形成的链表，使用该链表和页内偏移量Pre Node page Number和Next Node page可以定位到某一个确定的页。","remarkDisplay":true},"objectClass":"NSArray"},"text":"物理概念"},"2":{"objectClass":"MindNode","ID":"MUQLA","lineColor":"#37C45A","children":{"0":{"objectClass":"MindNode","ID":"FDAUE","children":{"0":{"objectClass":"MindNode","ID":"UY1C4","children":{"0":{"objectClass":"MindNode","ID":"D25NF","text":"区1(FSEG)：团"},"1":{"objectClass":"MindNode","ID":"6G24G","text":"区2(FSEG)：团"},"objectClass":"NSArray"},"text":"段：师"},"1":{"objectClass":"MindNode","ID":"SFV4T","text":"FREE: 独立团"},"2":{"objectClass":"MindNode","ID":"6P3SL","text":"FREE_FRAG: 独立团"},"3":{"objectClass":"MindNode","ID":"57H08","text":"FULL_FRAG: 独立团 "},"objectClass":"NSArray"},"text":"表空间：集团军","remark":"第一个组的前三个页，可以看作是表结构","remarkDisplay":true},"objectClass":"NSArray"},"text":"几个概念的关系"},"3":{"objectClass":"MindNode","ID":"UNN86","lineColor":"#8B6914","children":{"0":{"objectClass":"MindNode","ID":"2P4X1","text":"比独立表空间多了一些系统属性"},"1":{"objectClass":"MindNode","ID":"CU8LL","children":{"0":{"objectClass":"MindNode","ID":"82O4R","text":"SYS_TABLES"},"1":{"objectClass":"MindNode","ID":"10P6F","text":"SYS_COLUMNS"},"2":{"objectClass":"MindNode","ID":"78132","text":"SYS_INDEXES"},"3":{"objectClass":"MindNode","ID":"ORXM4","text":"SYS_FIELDS"},"4":{"objectClass":"MindNode","ID":"6NTEF","children":{"0":{"objectClass":"MindNode","ID":"8EVV2","text":"根据表名到 SYS_TAB 表中定位到具体的记录，从而获取到 SYS_TABLESPACES 表的\nTABLE_ID"},"1":{"objectClass":"MindNode","ID":"D5LW2","text":"使用获取的 TABLE_ID到 SYS_COLUMNS 表中就可以获取到属于该表的所有列的信息"},"2":{"objectClass":"MindNode","ID":"87772","text":"使用获取的TABLE_ID 还可以到SYS_INDEXES 表中获取所有的索引的信息.索引的信息\n中包括对应的 INDEX_ID 还记录着该索引对应的B+树根页面是哪个表空间的哪个页面."},"3":{"objectClass":"MindNode","ID":"E3688","text":"使用获取的INDEX_ID 就可以到 SYS_FIELDS 表中获取所有索引列的信息"},"objectClass":"NSArray"},"text":"上面四个表比较重要，使用过程"},"objectClass":"NSArray"},"text":"InnoDB数据字典","remark":"表中之表","remarkDisplay":true},"2":{"objectClass":"MindNode","ID":"P0I6A","text":"第七个页面存放表中之表的元信息"},"objectClass":"NSArray"},"text":"系统表空间","style":"[{\"key\":\"bold\",\"start\":0,\"end\":5}]","style2":{"objectClass":"NSDictionary","bold":1}},"objectClass":"NSArray"},"text":"InnoDB的独立表空间"},"ID":"J8810","style":100,"lineKeepThin":true}