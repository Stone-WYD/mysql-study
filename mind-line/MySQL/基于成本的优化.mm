{"objectClass":"NSDictionary","root":{"objectClass":"MindNode","ID":"TKG8W","children":{"0":{"objectClass":"MindNode","ID":"J42VP","children":{"0":{"objectClass":"MindNode","ID":"5HD18","text":"I/O成本","remark":"加载一个页面成本默认为1.0","remarkDisplay":true},"1":{"objectClass":"MindNode","ID":"268BX","text":"CPU成本","remark":"成本默认为0.2","remarkDisplay":true},"objectClass":"NSArray"},"text":"什么是成本","shrink":true},"1":{"objectClass":"MindNode","ID":"8Z0O7","children":{"0":{"objectClass":"MindNode","ID":"51EQB","text":"根据搜索条件，找出所\n有可能使用的索引"},"1":{"objectClass":"MindNode","ID":"64L52","children":{"0":{"objectClass":"MindNode","ID":"318T3","children":{"0":{"objectClass":"MindNode","ID":"F2G57","text":"页数 * 1.0 + 1.1"},"1":{"objectClass":"MindNode","ID":"KAH57","text":"页数 = Data_length / 16 / 1024"},"objectClass":"NSArray"},"text":"I/O成本"},"1":{"objectClass":"MindNode","ID":"NZQ35","children":{"0":{"objectClass":"MindNode","ID":"0OJ25","text":"Rows * 0.2 + 1.0"},"objectClass":"NSArray"},"text":"CPU成本"},"objectClass":"NSArray"},"text":"计算全表扫描的代价"},"2":{"objectClass":"MindNode","ID":"T2258","children":{"0":{"objectClass":"MindNode","ID":"DC4XN","children":{"0":{"objectClass":"MindNode","ID":"4DJ1F","text":"读取索引的一个扫描区间成本和读取一个\n页面的 I/O 成本一样"},"objectClass":"NSArray"},"text":"扫描区间数量"},"1":{"objectClass":"MindNode","ID":"DD6Q4","children":{"0":{"objectClass":"MindNode","ID":"ZOBP2","text":"每次回表操作都相当于访问一个页面(读取一个页面的 I/O 成本 加 cpu成本 )"},"objectClass":"NSArray"},"text":"需要回表的记录数"},"2":{"objectClass":"MindNode","ID":"ZYI77","children":{"0":{"objectClass":"MindNode","ID":"MY577","text":"参数较少使用 index dive 确定成本"},"1":{"objectClass":"MindNode","ID":"48JH5","children":{"0":{"objectClass":"MindNode","ID":"DE5XU","text":"统计数据大致的重复数量 x"},"1":{"objectClass":"MindNode","ID":"A4K6X","text":"参数数量 n * x 为需要回表查询的次数"},"2":{"objectClass":"MindNode","ID":"R77CR","text":"该方法精确度和实际情况往往有较大出入"},"3":{"objectClass":"MindNode","ID":"Z688H","text":"所以 in 中参数很多时，可能会不用索引而进行全表扫描"},"objectClass":"NSArray"},"text":"参数较多时","remark":"参数数量大于 eq_range_ index _ dive_limit","remarkDisplay":true},"objectClass":"NSArray"},"text":"使用 in 条件时"},"objectClass":"NSArray"},"text":"计算使用不同索引执行查询的代价"},"3":{"objectClass":"MindNode","ID":"J8NU5","text":"对比各种执行方案的代价，找出\n成本最低的那个方案"},"objectClass":"NSArray"},"text":"单表查询成本","shrink":true},"2":{"objectClass":"MindNode","ID":"M1CCV","children":{"0":{"objectClass":"MindNode","ID":"C1RP9","text":"把查询驱动表后得到的记录条数\n称为驱动表的扇出"},"1":{"objectClass":"MindNode","ID":"36S2G","children":{"0":{"objectClass":"MindNode","ID":"2N37J","text":"外连接驱动表固定"},"1":{"objectClass":"MindNode","ID":"762N1","text":"内连接驱动表不固定，需要比较后选择"},"objectClass":"NSArray"},"text":"单次访问驱动表的成本 + 驱动表\n扇出值 × 单次访问被驱动表的成本"},"2":{"objectClass":"MindNode","ID":"HG3GL","children":{"0":{"objectClass":"MindNode","ID":"EXU35","text":"减少驱动表的扇出"},"1":{"objectClass":"MindNode","ID":"8518L","children":{"0":{"objectClass":"MindNode","ID":"C4M5R","text":"连接列尽可能建立索引","remark":"可以使用ref方法来访问","remarkDisplay":true},"1":{"objectClass":"MindNode","ID":"3M4O3","text":"连接列是主键或唯一二级索引列"},"objectClass":"NSArray"},"text":"访问被驱动表的成本尽可能要低"},"objectClass":"NSArray"},"text":"优化重点","style2":{"objectClass":"NSDictionary","color":"#FF0000"}},"objectClass":"NSArray"},"text":"连接查询的成本"},"3":{"objectClass":"MindNode","ID":"8FBJA","text":"调节成本常数"},"objectClass":"NSArray"},"text":"基于成本呢的优化"},"ID":"I7V4Y","style":100,"lineKeepThin":true}